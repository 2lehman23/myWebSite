<html> 
<head> 
<script language="JavaScript">
var Option = 0;
var key = 1;
var roomKey = 0;
var roomvar = -1;
var flashlight = 0;
var loop = 0;

var rooms = 
[
	["Your eyes start to open as you are blinded by a bright light. You sit up and see nothing but a door and a bed that you are on."], 
	["You enter a long hallway with a door at the end and multiple paintings on the wall."],
	["This next room has a table with a flashlight on it and two shelves. The door is on the other side of the room."],
	["This next room is pitch black, you can not see a thing. Luckily you have the flashlight, would you like to use it.", "You enter the room and cannot see. It is pitch black. You hear the door behind you shut."],
	["You use the flashlight and see a door on the other side of the room."],
	["You reach outside and have escaped the dungeon"]
];
var options = [
	["Open the door", "look under the bed", "Lay back down"],
	["Open the door","Search the paintings","Go back"],
	["Open the door", "Take the flashlight","Look on the shelves"],
	["Use flashlight","Use flashlight","Use flashlight"],
	["Open the door", "Open the door", "Open the door"]
];
var items = [
	["You see a shiny key under the bed.", "You feel fully rested. Your eyes, once again, start to open as you are blinded by a bright light. You sit up and see nothing but a door and a bed that you are on."],
	["You search the paintings and find the key to the door.","You try to go back but the door is locked behind you."],
	["You now have a flashlight", "When you look on the shelves you find a key"],
	["You use the flashlight and see a door on the other side of the room."]
];

function Rooms()
{
	if(roomvar == 4)
	{
		if (flashlight == 0)
		{
			document.getElementById("TBox").value = rooms[4][1]
		}
	}
	else 
	{
		document.getElementById("TBox").value = rooms[roomvar][0]
		setOptions()
	}
}

function OpChoice(d)
{

	if (d == 1)
	{
		if (roomvar == 4)
		{
			if (flashlight == 1)
			{
				roomvar++;
				Rooms()
			}
		}	
		else if (roomvar == 5)
		{
			roomvar++;
			Rooms()
		}
		else if (roomvar != 5||4)
		{
			LockedDoor() 
		}
	}
	if(d == 2)
	{
		if (roomvar == 3)
		{
			flashlight = 1;
		}
		else if (roomvar == 4)
		{
			if (flashlight == 1)
			{
				roomvar++;
				Rooms()
			}
		}
		else if (roomvar == 5)
		{
			roomvar++;
			Rooms()
		}
		
		else if (roomvar != 5||4||3)
		{
			key++;
			document.getElementById("TBox").value = items [roomvar][0];
		}
	}
	if(d == 3)
	{
	
		if (roomvar == 4)
			{
				if (flashlight == 1)
				{
					roomvar++;
					Rooms()
				}
			}
		else if (roomvar == 5)
		{
			roomvar++;
			Rooms()
		}
		else if (roomvar != 5||4)
		{
			document.getElementById("TBox").value = items [roomvar][1];
		}
	
	}
}

function NextRoom()
{
	if (roomvar == 4)
	{
		if (flashlight == 1)
		{
	
			document.getElementById("TBox").value = "please use your flashlight";
		
		}
	}
	else
	{
		LockedDoor()
	}

}

function LockedDoor()
{
	if (roomvar == 5)
	{
			roomvar++;
			Rooms()
	}
	if (key == 1 )
	{
		roomvar++
		key--
		Rooms()
	}
	else if (roomvar != 5)
	{
		document.getElementById("TBox").value = "You forgot the key for this door!";
	}

}

function setOptions(){
	document.getElementById("Op1").value = options[roomvar][0];
	document.getElementById("Op2").value = options[roomvar][1];
	document.getElementById("Op3").value = options[roomvar][2];
}

function Option1()
{
	OpChoice(1);
	
}

function Option2()
{
	OpChoice(2);
}

function Option3()
{
	OpChoice(3);
}

</script>
</head>
<body > 
<center>
<h1>Adventure game</h1>
</br>
<input id="TBox" type="text" size="100" />
</br></br></br>
<input type="button" id="Op1" value="Option 1" onclick="Option1()" />
<input type="button" id="Op2" value="Option 2" onclick="Option2()"/>
<input type="button" id="Op3" value="Option 3" onclick="Option3()"/>
<input type="button" id="NR" value="Next Room" onclick="NextRoom()"/>


</center>
</body>
</html>